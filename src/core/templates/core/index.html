{% extends 'core/base.html' %}
{% load cache %}
{% load static %}

{% block head %}
<link rel="stylesheet" type="text/css" href="{% static 'core/css/index.css' %}"/>
{% endblock %}

{% block title %}
<title>ACM at FSU Programming Contest</title>
{% endblock %}


{% block content %}

<!-- Messages -->
{% include 'core/messages.html' %}
<!-- End Messages -->

{% cache cache_timeout homepage %}
  <h1 class="text-center display-4">ACM at FSU Programming Contest</h1>

  <div class="row justify-content-center">
    <div class="col">
      <div class="jumbotron shadow mt-4" id="jumbo-announcements">
        <h1 class="mt-0">Recent Announcement</h1>
        <hr class="my-4">
        {% for announcement in announcements %}
        <div class="card mb-4 shadow-sm">
          <div class="card-body">
            <h4 class="card-title mb-0">{{ announcement.title }}</h4>
            <small class="card-text text-muted">{{ announcement.author.first_name }} | {{ announcement.created_on}}
            </small>
            {% if announcement.created_on < announcement.updated_on %} <br>
              <small class="card-text text-muted">Updated on: {{ announcement.updated_on}} </small>
              {% endif %}
              {% if announcement.content|length > 140 %}
              <p class="card-text lead mt-2">{{announcement.content|slice:":140" }}...</p>
              <a href="{% url 'announcement_detail' announcement.slug  %}" class="btn btn-primary btn-sm">Read More</a>
              {% else %}
              <p class="card-text lead mt-2">{{announcement.content }}</p>
              {% endif %}
          </div>
        </div>
        {% empty %}
        <p class="lead">No announcements yet.</p>
        {% endfor %}
      </div>
    </div>
  </div>

 
    <p class="lead text-center mb-1">An <a href="https://icpc.global" target="_blank">ICPC</a> style contest hosted semesterly by the Association for Computing Machinery Florida State University Student Chapter.</p>
  
  <hr>
  <div class="row justify-content-center">
    <div class="col-10">
      <p class="text-center">
        The ACM Programming Contest is a coding competition
      emphasizing problem solving executed in code.
      Students, faculty, and staff from all majors and colleges are welcome.
      The competition lasts 5 hours, and teams are limited to 3 members.
      The top teams from each division receive prizes,
      which have previously included things like Google Home Minis,
      Amazon Echoes, Raspberry Pi's, Chromecasts, and ACM chapter t-shirts.
      </p>
    </div>
  </div>
  
  <div class="row justify-content-center mt-3">
    <div class="col-md-5 text-center mb-3">
      <h3>Contest Details</h3>
      {% if contest is not None %}
        <p class="mb-1"><span class="font-weight-bold">Date: </span>{{ contest.contest_date }}</p>
        <p class="mb-1"><span class="font-weight-bold">Doors Open: </span>{{ contest.contest_doors }}</p>
        <p class="mb-1"><span class="font-weight-bold">Contest Start: </span>{{ contest.contest_start }}</p>
        <p class="mb-1"><span class="font-weight-bold">Scoreboard Freeze: </span>{{ contest.contest_freeze }}</p>
        <p class="mb-1"><span class="font-weight-bold">Contest End: </span>{{ contest.contest_end }}</p>
        <p class="mb-1"><span class="font-weight-bold">Awards Ceremony: </span>{{ contest.contest_awards }}</p>
      {% else %}
        <p>Contest schedule not yet set.</p>
      {% endif %}
    </div>
    <div class="col-md-5 text-center">
      <h3>Extra Credit Courses</h3>
      {% if courses|length == 0 %}
        <p>No courses have been confirmed at this time.</p>
      {% elif courses|length < 6 %}
        {% for course in courses %}
          <p class="mb-1"><span class="font-weight-bold">{{ course.code }} </span>{{ course.name }} - {{ course.instructor.last_name }}</p>
        {% endfor %}
      {% else %}
        {% for course in courses|slice:"5" %}
          <p class="mb-1"><span class="font-weight-bold">{{ course.code }} </span>{{ course.name }} - {{ course.instructor.last_name }}</p>
        {% endfor %}
        <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#displayCoursesModal">View All
        </button>
      {% endif %}
    </div>
  </div>
  <div class="row mt-4 justify-content-center">
    <h2 class="text-center">Our Sponsors</h2>
  </div>
  <div class="card-deck mb-5">
    <div class="card mt-3 bg-transparent border-0">
      <div class="card-body">
        <div class="col d-flex align-items-center justify-content-center">
          <img src="{% static 'core/img/L3Harris_logo.png' %}" class="img-fluid" alt="...">
        </div>
      </div>
    </div>
    <div class="card mt-3 bg-transparent border-0">
      <div class="card-body">
        <div class="col d-flex align-items-center justify-content-center">
          <img src="{% static 'core/img/deloitte.png' %}" class="img-fluid" alt="...">
        </div>
      </div>
    </div>
      <div class="card mt-3 bg-transparent border-0">
        <div class="card-body ">
          <div class="col d-flex align-items-center justify-content-center">
            <img src="{% static 'core/img/i2x.jpg' %}" class="img-fluid" alt="...">
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Courses Modal -->
  <div class="modal fade" id="displayCoursesModal" tabindex="-1" role="dialog"
    aria-labelledby="displayCoursesModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="displayCoursesModalLongTitle">Extra Credit Courses</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            {% for course in courses %}
              <p class="mb-1"><span class="font-weight-bold">{{ course.code }} </span>{{ course.name }} - {{ course.instructor.last_name }}</p>
            {% endfor %}
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
{% endcache %}

{% endblock %}
